# –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –º–∞—Å—à—Ç–∞–±–æ–≤

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö

**–§–∞–π–ª: `api/models.py`**
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `physical_scale` –≤ –º–æ–¥–µ–ª—å `Block`
- –¢–∏–ø: `IntegerProperty` (—Å—Ç–µ–ø–µ–Ω—å —á–∏—Å–ª–∞ 10 –≤ –º–µ—Ç—Ä–∞—Ö)
- –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 0 (—á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç 10^0 = 1 –º–µ—Ç—Ä)

### 2. –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–∞—Å—à—Ç–∞–±–∞–º–∏

**–§–∞–π–ª: `client/src/components/Knowledge_map/utils/scaleUtils.ts`**
- `SCALE_UNITS`: –º–∞—Å—Å–∏–≤ –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è (–æ—Ç –Ω–∞–Ω–æ–º–µ—Ç—Ä–æ–≤ –¥–æ –≥–∏–≥–∞–º–µ—Ç—Ä–æ–≤)
- `exponentToReadableScale()`: –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç —Å—Ç–µ–ø–µ–Ω—å 10 –≤ —É–¥–æ–±–Ω—ã–µ –µ–¥–∏–Ω–∏—Ü—ã
- `readableScaleToExponent()`: –æ–±—Ä–∞—Ç–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è
- `formatScaleForDisplay()`: —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "1 –∫–º")
- `getLevelName()`: –ø–æ–ª—É—á–∞–µ—Ç –∏–º—è —É—Ä–æ–≤–Ω—è –ø–æ –µ–≥–æ –º–∞—Å—à—Ç–∞–±—É

### 3. –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö

**–§–∞–π–ª—ã: `client/src/components/Knowledge_map/types/index.ts`, `client/src/services/api.ts`**
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `physical_scale?: number` –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã `BlockData` –∏ `Block`

### 4. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Ä–æ–≤–Ω–µ–π

**–§–∞–π–ª: `client/src/components/Knowledge_map/Level.tsx`**
- –£—Ä–æ–≤–Ω–∏ —Ç–µ–ø–µ—Ä—å –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –º–∞—Å—à—Ç–∞–± –≤–º–µ—Å—Ç–æ –Ω–æ–º–µ—Ä–∞
- –§—É–Ω–∫—Ü–∏—è `getLevelPhysicalScale()` –∏—â–µ—Ç –º–∞—Å—à—Ç–∞–± –∏–∑ –±–ª–æ–∫–æ–≤ —É—Ä–æ–≤–Ω—è
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `getLevelName()` –¥–ª—è –∫—Ä–∞—Å–∏–≤–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "1 –∫–º" –≤–º–µ—Å—Ç–æ "–£—Ä–æ–≤–µ–Ω—å: 3")

### 5. –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é

**–§–∞–π–ª: `client/src/components/Knowledge_map/BlockContextMenu.tsx`**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–ø—Ü–∏—è "üìè –ó–∞–∫—Ä–µ–ø–∏—Ç—å –∑–∞ —É—Ä–æ–≤–Ω–µ–º —Å –º–∞—Å—à—Ç–∞–±–æ–º"
- –ü–æ–ª–µ –≤–≤–æ–¥–∞ –¥–ª—è —á–∏—Å–ª–æ–≤–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –º–∞—Å—à—Ç–∞–±–∞
- –í—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è (–Ω–º, –º–∫–º, –º–º, —Å–º, –¥–º, –º, –∫–º, –ú–º, –ì–º)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—É—â–∏–º –º–∞—Å—à—Ç–∞–±–æ–º –±–ª–æ–∫–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤–≤–æ–¥–∞ (—Ç–æ–ª—å–∫–æ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ —á–∏—Å–ª–∞)

**–§–∞–π–ª: `client/src/components/Knowledge_map/BlockContextMenu.module.css`**
- –°—Ç–∏–ª–∏ –¥–ª—è –Ω–æ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –≤–≤–æ–¥–∞ –º–∞—Å—à—Ç–∞–±–∞
- Responsive design —Å –∫—Ä–∞—Å–∏–≤—ã–º UX

### 6. API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

**–§–∞–π–ª: `api/main.py`**
- –ù–æ–≤—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç `POST /api/blocks/{id}/pin_with_scale`
- –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö `PinWithScaleInput` –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ `physical_scale`
- –§—É–Ω–∫—Ü–∏—è `pin_block_with_scale()` –¥–ª—è –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏—è —Å –º–∞—Å—à—Ç–∞–±–æ–º
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ Neo4j –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –ø–æ–ª—è `physical_scale`
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –æ—Ç–≤–µ—Ç—ã API –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è `physical_scale` –≤ –±–ª–æ–∫–∞—Ö

### 7. –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ API —Ñ—É–Ω–∫—Ü–∏–∏

**–§–∞–π–ª: `client/src/services/api.ts`**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `pinBlockWithScale(blockId, physicalScale)`
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è `physical_scale`

### 8. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

**–§–∞–π–ª: `client/src/components/Knowledge_map/index.tsx`**
- –î–æ–±–∞–≤–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `handlePinBlockWithScale()`
- –ü–µ—Ä–µ–¥–∞—á–∞ `currentPhysicalScale` –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é
- –ò–º–ø–æ—Ä—Ç –Ω–æ–≤–æ–π API —Ñ—É–Ω–∫—Ü–∏–∏ `pinBlockWithScale`

### 9. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö

**–§–∞–π–ª: `client/src/components/Knowledge_map/hooks/useDataLoading.ts`**
- –§—É–Ω–∫—Ü–∏—è `convertApiBlockToBlockData()` —Ç–µ–ø–µ—Ä—å –≤–∫–ª—é—á–∞–µ—Ç `physical_scale`

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–§–∞–π–ª: `test_scale_functionality.py`**
- –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π —Ç–µ—Å—Ç –≤—Å–µ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Ç–∏–ª–∏—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –º–∞—Å—à—Ç–∞–±–æ–≤
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏—è –±–ª–æ–∫–∞ —Å –º–∞—Å—à—Ç–∞–±–æ–º

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤:
- ‚úÖ –£—Ç–∏–ª–∏—Ç—ã –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –º–∞—Å—à—Ç–∞–±–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚ùå API —Å–µ—Ä–≤–µ—Ä —Ç—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚ùå –ù–æ–≤—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç `/api/blocks/{id}/pin_with_scale` –ø–æ–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

## üîß –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

1. **–ü—Ä–æ—Å–º–æ—Ç—Ä —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –º–∞—Å—à—Ç–∞–±–æ–≤**: –£—Ä–æ–≤–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç —Å–≤–æ–π —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –º–∞—Å—à—Ç–∞–± (–Ω–∞–ø—Ä–∏–º–µ—Ä, "1 –∫–º")

2. **–ó–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Å –º–∞—Å—à—Ç–∞–±–æ–º**:
   - –ü—Ä–∞–≤—ã–π –∫–ª–∏–∫ –ø–æ –±–ª–æ–∫—É
   - –í—ã–±—Ä–∞—Ç—å "üìè –ó–∞–∫—Ä–µ–ø–∏—Ç—å –∑–∞ —É—Ä–æ–≤–Ω–µ–º —Å –º–∞—Å—à—Ç–∞–±–æ–º"
   - –í–≤–µ—Å—Ç–∏ —á–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
   - –í—ã–±—Ä–∞—Ç—å –µ–¥–∏–Ω–∏—Ü—É –∏–∑–º–µ—Ä–µ–Ω–∏—è
   - –ù–∞–∂–∞—Ç—å "–ó–∞–∫—Ä–µ–ø–∏—Ç—å"

3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è**: –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –≤–≤–µ–¥–µ–Ω–Ω—ã–µ –µ–¥–∏–Ω–∏—Ü—ã –≤ —Å—Ç–µ–ø–µ–Ω–∏ 10 –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

## üìù –ü—Ä–∏–º–µ—Ä—ã –º–∞—Å—à—Ç–∞–±–æ–≤

- `10^(-9)` ‚Üí "1 –Ω–º" (–Ω–∞–Ω–æ–º–µ—Ç—Ä—ã, –∞—Ç–æ–º–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å)
- `10^(-3)` ‚Üí "1 –º–º" (–º–∏–ª–ª–∏–º–µ—Ç—Ä—ã, –º–µ–ª–∫–∏–µ –¥–µ—Ç–∞–ª–∏)
- `10^0` ‚Üí "1 –º" (–º–µ—Ç—Ä—ã, —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–π –º–∞—Å—à—Ç–∞–±)
- `10^3` ‚Üí "1 –∫–º" (–∫–∏–ª–æ–º–µ—Ç—Ä—ã, –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –º–∞—Å—à—Ç–∞–±)
- `10^6` ‚Üí "1 –ú–º" (–º–µ–≥–∞–º–µ—Ç—Ä—ã, –ø–ª–∞–Ω–µ—Ç–∞—Ä–Ω—ã–π –º–∞—Å—à—Ç–∞–±)

## üöß –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞**: –ù—É–∂–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å API —Å–µ—Ä–≤–µ—Ä –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π
2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ UI**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –Ω–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω—é –≤ –±—Ä–∞—É–∑–µ—Ä–µ
3. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –ø–æ–ª–µ `physical_scale` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ Neo4j
4. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω–µ–π**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —É—Ä–æ–≤–Ω–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ –º–∞—Å—à—Ç–∞–±—ã

## üí° –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

- **–•—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Å—Ç–µ–ø–µ–Ω—è—Ö 10**: –£–ø—Ä–æ—â–∞–µ—Ç –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
- **–û—Ç–¥–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏**: –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0 (1 –º–µ—Ç—Ä) –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –±–ª–æ–∫–æ–≤
- **UI/UX**: –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –≤—ã–ø–∞–¥–∞—é—â–∏–º —Å–ø–∏—Å–∫–æ–º –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è 